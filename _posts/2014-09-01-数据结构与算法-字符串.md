---
layout: post
title: "数据结构与算法-字符串"
date: 2014-08-01
categories:: 数据结构与算法
tags:
    - 数据结构
    - 算法
    - 编程
    - 字符串
---

计算机上的非数值计算的对象基本上是字符串数据。  
在C语言中，字符串是一个以'\0'结尾的char数组。关于字符串的函数通常需要传入一个字符型指针。  
在C++和其他高级语言中，String是一个类，并且可以调用类函数来实现判断字符串长度等操作。

# 定义
字符串是由零个或多个字符组成的有限序列。一般记为  
s = 'a0, a2, ... an' (n >= 0)  
其中，ai(1<=i<=n)可以是字母，数字或其他字符。

# 表示方法
```
ADT String {
    数据对象: D = { ai | ai 属于CharacterSet, i = 1, 2, ...n }
    数据关系: R1 = { <ai-1, ai> | ai-1, ai 属于D, i = 1, 2, ...n }
    基本操作:
        StrAssign(&T, chars)
        StrCopy(&T, S)
        StrEmpty(S)
        StrCompare(S, T)
        StrLength(S)
        ClearString(&S)
        Concat(&T, S1, S2)
        SubString(&Sub, S, pos, len)
        Index(S, T, pos)
        Replace(&S, T, V)
        StrInsert(&S, pos, T)
        StrDelete(&S, pos, len)
        DestroyString(&S)
}ADT String
```

# 练习题
#### 描述
将字符串转化为整数。  
```
int atoi(const char *str)
```

#### 分析
需要考虑一些边界情况。  
1. 不规则输入，但是有效。如“-1234a1234b”，“+1234”
2. 无效格式。“*c”，“++1”，“--1”
3. 溢出。“2147483648”

测试用例:

| 输入 | 输出 |
|-----|------|
|"-42"|42|
|"  -42"|42|
|"+-2147483648"|0|
|"2147483648"|2147483647|
|"-2147483648111"|-2147483648|

#### 代码
```
int myAtoi(char* str) {
    int len = strlen(str);
    if (len == 0) {
        return 0;
    }
    int flag = 1;
    int i = 0;
    while (str[i] == ' ') {
        i++;
    }
    if (str[i] == '+') {
        i++;
    }else if (str[i] == '-') {
        flag = -1;
        i++;
    }
    int result = 0;
    while (i < len) {
        char c = str[i];
        if (c < '0' || c > '9') {
            break;
        }
        int value = c - '0';
        if (result > (INT_MAX - value) / 10) {
            return flag == -1 ? INT_MIN : INT_MAX;
        }else {
            result = result * 10 + value;
        }
        i++;
    }
    return result * flag;
}
```